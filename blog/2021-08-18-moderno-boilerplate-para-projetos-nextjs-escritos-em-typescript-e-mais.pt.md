---
title: 'Moderno boilerplate para projetos Next.js escritos em TypeScript e mais'
date: '2021-08-18 01:21:23'
description: Next.js √© um framework desenvolvido com React que tem mudado a forma como constru√≠mos aplicativos hoje em dia. Neste artigo, vou mostrar um boilerplate Next.js que criei contendo as principais funcionalidades de todos os projetos em que trabalho.
category: 'Development'
background: '#353b48'
featuredImage: '/assets/img/blog/modern-starter-for-nextjs-applications-written-in-typescript-and-more.jpg'
---

**Comecei a trabalhar com o React h√° alguns anos e ele ainda √© minha tecnologia favorita para quase todos os sites que desenvolvo. [Meu blog √© desenvolvido com Gatsby](https://www.diogorodrigues.dev/pt/blog/porque-eu-decidi-desenvolver-meu-blog-com-gatsbyjs) (outro framework fant√°stico baseado em React), mas desde que tive minha primeira experi√™ncia com [Next.js](https://nextjs.org/) percebi que esta ferramenta faria parte de meus projetos futuros. E por causa disso eu criei este [moderno boilerplate para projetos Next.js](https://github.com/diogorodrigues/nextjs-typescript-starter)**

## Por que Next.js?

- [Next.js](https://nextjs.org/) oferece flexibilidade para renderizar p√°ginas no client ou no server, ou uma combina√ß√£o de ambos.
- Podemos usar esse framework para criar aplica√ß√µes SPA ou sites tradicionais que precisam ser indexados em mecanismos de pesquisa. Ent√£o, √© perfeito para SEO.
- Next.js tamb√©m gera arquivos est√°ticos, o que √© perfeito para criar p√°ginas (ou sites inteiros) que n√£o precisam ser din√¢micos.
- Ao us√°-lo, n√£o precisamos nos preocupar com o desempenho porque este framework lida com a maior parte da complexidade para n√≥s: minimiza√ß√£o de javascript, code splitting, pre-fetching, caching e muito mais.


## Por que precisamos usar um boilerplate?

Apesar de todas as vantagens do Next.js, os boilerplates (ou starters) nos ajudam a economizar tempo definindo as configura√ß√µes b√°sicas para nossos projetos: suporte para PWA, typescript, storybook, testes, lint, c√≥digo consistente...

**Ent√£o, com base nas necessidades dos projetos em que trabalhei, [eu criei um boilerplate que uso sempre que inicio novas aplica√ß√µes web](https://github.com/diogorodrigues/nextjs-typescript-starter). E talvez tamb√©m possa ser √∫til para voc√™. üòÅ‚ú®**

## Principais configura√ß√µes do [meu Next.js boilerplate](https://github.com/diogorodrigues/nextjs-typescript-starter)

### Javascript com Typescript

[Typescript](https://www.typescriptlang.org/) foi criado pela Microsoft e tem crescido em popularidade, como voc√™ pode ver nesta [pesquisa de 2020](https://2020.stateofjs.com/en-US/technologies/javascript-flavors/).

> ‚ÄúThe bigger the app you‚Äôre writing, the more useful typescript is.‚Äù - Anders Hejlsberg

_Tradu√ß√£o: "Quanto maior a aplica√ß√£o que voc√™ est√° escrevendo, mais √∫til √© o typescript."_

**√â um superconjunto de javascript que fornece tipagen est√°tica para nos ajudar a salvar nosso projeto de falhas ao detectar bugs, tornando nosso c√≥digo mais autodocumentado e mais leg√≠vel.** Como o typescript √© compat√≠vel com navegadores diferentes, tamb√©m oferece a capacidade de usar recursos JS modernos para qualquer navegador (uma vez que o c√≥digo final ser√° transpilado para vanilla javascript).

Voc√™ pode verificar mais benef√≠cios do TS assistindo este [v√≠deo](https://www.youtube.com/watch?v=wYgSiFaYSSo&ab_channel=MicrosoftDeveloper).


### C√≥digo consistente usando EditorConfig, Prettier, ESLint e typescript-eslint

Especialmente quando estamos trabalhando em equipe, nosso c√≥digo precisa ser consistente. **Portanto, todas essas ferramentas nos ajudam a evitar armadilhas comuns e melhorar a sintaxe dos nossos c√≥digos**.

- **[EditorConfig](https://editorconfig.org/)**: isso nos ajuda a configurar e formatar o c√≥digo por meio de estilo de indenta√ß√£o, tamanho de indenta√ß√£o, comprimento da linha e muito mais.
- **[Prettier](https://prettier.io/)**: como podemos ler em seu site, √© um formatador de c√≥digo opinativo. Ele cuida da formata√ß√£o do nosso c√≥digo no momento em que salvamos o arquivo: aplicar ponto-e-v√≠rgulas, usar apenas aspas simples e outras coisas.
- **[ESLint](https://eslint.org/)**: totalmente customiz√°vel, e mais do que um formatador de c√≥digo, ajuda os desenvolvedores a encontrar rapidamente erros de codifica√ß√£o que podem ser corrigidos automaticamente ou n√£o. Por exemplo, a [ regra no-unused-vars](https://eslint.org/docs/rules/no-unused-vars) garante que n√£o teremos muitas vari√°veis desnecess√°rias em nosso c√≥digo.
- **[Typescript-eslint](https://github.com/typescript-eslint/typescript-eslint)**: esta depend√™ncia permite que o ESLint suporte TypeScript.

### Estilos via Styled Components

**[Styled Components](https://styled-components.com/) √© uma [biblioteca CSS-in-JS](https://www.diogorodrigues.dev/pt/blog/css-in-js-e-a-morte-do-css-tradicional#o-que-e-css-in-js) que permite aos desenvolvedores escrever CSS para cada componente React diretamente (o que significa que n√£o precisamos nos preocupar com quest√µes relacionadas √†s classes e especificidade do CSS).**

Eu sou um grande f√£ desta biblioteca e abaixo est√£o alguns benef√≠cios ao usar Styled Components em nossos projetos React:

- **Escopo definido**: estilos s√£o criados para componentes individuais em vez de em um n√≠vel global, evitando v√°rios problemas que precisamos para lidar com a maneira tradicional de escrever CSS.
- **Vendor prefixing autom√°tico**: Styled Components adiciona prefixos corretos quando necess√°rio para garantir que os estilos sejam compat√≠veis com navegadores diferentes.
- **Elimina√ß√£o do CSS n√£o utilizado**: CSS n√£o utilizado s√£o removidos do c√≥digo automaticamente durante o build.
- **Temas**: Styled Components fornece uma maneira de passar um theme object para todos os componentes contendo configura√ß√µes gerais - como cores, fontes, espa√ßamentos...
- **Estilos din√¢micos**: podemos alterar os estilos de acordo com as propriedades do componente, o que fornece oportunidades poderosas para criar componentes personaliz√°veis e reutiliz√°veis.

### Documenta√ß√£o de componentes de IU com Storybook

**Em poucas palavras, [Storybook](https://storybook.js.org/) √© uma ferramenta de c√≥digo aberto usada para mostrar e interagir com componentes de forma independente em um ambiente de desenvolvimento isolado. Portanto, usando essa ferramenta poderosa, podemos nos concentrar em um componente por vez, desenvolvendo toda a IU antes de pensar em toda l√≥gica de neg√≥cios e em interfaces complexas.**

Funcionando como uma esp√©cie de playground e documenta√ß√£o, atrav√©s do [Storybook](https://storybook.js.org/) podemos ver uma lista de todos os componentes e tamb√©m testar todos os seus estados. Essa ferramenta tamb√©m melhora a capacidade de reutiliza√ß√£o e teste do c√≥digo.

![Storybook interface](/assets/img/blog/storybook.png)

**Principais vantagens do Storybook:**

- **Exibe todos os componentes existentes**: evita que os desenvolvedores criem acidentalmente componentes redundantes - um problema comum em grandes projetos n√£o documentados.
- **Funciona como documenta√ß√£o**: podemos usar o Storybook para garantir que o guia de estilo (cor, fontes, espa√ßamentos...) esteja sendo seguido e tamb√©m mostrar todos os estados dos componentes - o que melhora a comunica√ß√£o entre desenvolvedores e designers.
- **Oferece uma maneira f√°cil de realizar testes**: √†s vezes, um componente pode ser renderizado de maneira diferente, dependendo de suas propriedades. Por exemplo, um bot√£o pode ser renderizado como largura 100% ou n√£o; como pequeno, m√©dio ou grande; como laranja ou azul... Assim, podemos ver e testar facilmente todas essas varia√ß√µes no Storybook.
- **Ajuda a melhorar a qualidade do c√≥digo**: como vamos criar componentes de forma isolada, tendemos a nos concentrar em sua qualidade e reutiliza√ß√£o, o que √© √≥timo para o projeto e a equipe.

Eu sugiro fortemente que voc√™ d√™ uma olhada mais de perto na [Documenta√ß√£o do Storybook](https://storybook.js.org/docs/react/get-started/introduction) para ler mais sobre esta ferramenta incr√≠vel.

### Testes via Jest e React Testing Library (RTL)

C√≥digos complexos n√£o s√£o f√°ceis de debugar e √†s vezes levamos muito tempo para localizar problemas. Portanto, **o teste pode garantir que a aplica√ß√£o funcionar√° conforme o esperado.**

Existem diferentes tipos de testes e maneiras de implement√°-los. Vou me concentrar nos testes unit√°rios aqui e tamb√©m recomendo que voc√™ crie testes seguindo o [test-driven development (TDD)](https://en.wikipedia.org/wiki/Test-driven_development) - isso significa que o teste √© criado antes do pr√≥prio c√≥digo.

**Entre as v√°rias ferramentas para implementar os testes, gosto de usar as duas que aparecem no topo desta [pesquisa denominada State of JS 2020](https://2020.stateofjs.com/en-US/technologies/testing/):**

- **[Jest](https://jestjs.io/)**: √© uma das ferramentas mais populares e satisfat√≥rias, pois possui diversas funcionalidades j√° integradas, tais como: mock, snapshot, informa√ß√£o de cobertura de c√≥digo, entre outros. Possui √≥tima integra√ß√£o com o ecossistema React, pois tamb√©m √© mantido pela equipe do Facebook.
- **[React Testing Library](https://testing-library.com/docs/react-testing-library/intro/)**: √© um grupo de fun√ß√µes utilit√°rias poderosas para Jest que tornam nossa vida como desenvolvedores mais f√°cil. Usando RTL, podemos selecionar os componentes pelo atributo aria-label, por exemplo - o que pode nos encorajar a escrever melhores componentes por meio de abordagens de acessibilidade.

Para saber mais sobre as ferramentas Jest e React Testing Library, recomendo este artigo: [Automatizando testes de UI com Jest e React Testing Library](https://www.diogorodrigues.dev/pt/blog/automatizando-testes-de-ui-com-jest-e-react-testing-library).

### Suporte para PWA usando [next-pwa](https://www.npmjs.com/package/next-pwa)

**[Progressive Web App (PWA)](https://web.dev/progressive-web-apps/) √© uma cole√ß√£o de APIs modernas que permitem o desenvolvimento de aplicativos web usando aprimoramento progressivo em navegadores modernos. Usando essa abordagem, o site pode ser instalado e funcionar como um aplicativo m√≥vel nativo tamb√©m**.

Alguns benef√≠cios do PWA:

- **Funcionamento semelhante a um aplicativo:** adicionar √† tela inicial, modo offline, notifica√ß√µes push...
- **N√£o requer loja:** ao contr√°rio de apps nativos, os PWAs n√£o exigem que voc√™ v√° a um lugar como o Google Play ou App Store para encontrar e instalar o aplicativo.
- **Muito mais barato de desenvolver do que aplicativos nativos:** as empresas gastam muito menos para desenvolver, manter, implantar e promover PWAs.

Nem todos os sites precisam ser PWA, ent√£o voc√™ pode facilmente desabilitar essa funcionalidade no boilerplate.

### Evitando git commit bugado com Husky and Lint-staged

**Para manter a boa qualidade do nosso c√≥digo, podemos usar essas duas depend√™ncias para executar alguns comandos toda vez que fizermos um commit. Ao fazer isso, ele ir√° lintar os arquivos que ser√£o submetidos ao commit (atrav√©s do Prettier e ESLint) e, se houver erros, precisaremos corrigir o c√≥digo e tentar fazer um novo commit.**

Voc√™ pode verificar as configura√ß√µes necess√°rias em `./package.json`.

- **[Husk](https://github.com/typicode/husky):** com base no [githooks](https://git-scm.com/docs/githooks), esta depend√™ncia nos permite rodar alguns eventos antes de um commit (pre-commit) e depois de um commit (post-commit). Este projeto est√° usando-o para executar o Lint-staged antes de qualquer commit.
- **[Lint-staged](https://github.com/okonet/lint-staged):** esta famosa ferramenta executar√° linters em arquivos em stage com base na configura√ß√£o do Prettier e ESLint.

### Gerador de c√≥digo consistente com Plop

> ‚Äú[Plop](https://plopjs.com/) is a little tool that saves you time and helps your team build new files with consistency.‚Äù - [Plop tool](https://plopjs.com/)

_Tradu√ß√£o: "[Plop](https://plopjs.com/) √© uma pequena ferramenta que economiza tempo e ajuda sua equipe a criar novos arquivos com consist√™ncia."_

Assim, ao utilizar esta ferramenta, atrav√©s de alguns templates, pode-se executar um comando para criar todos os arquivos necess√°rios para novos componentes seguindo um padr√£o, o que torna nosso c√≥digo consistente e nos economiza algum tempo.

Se voc√™ executar `yarn generate button` na linha de comando, um novo diret√≥rio chamado ‚ÄòButton‚Äô ser√° criado em ‚Äòsrc/componentes‚Äô contendo os arquivos necess√°rios e seus c√≥digos b√°sicos:
- index.tsx
- stories.tsx
- styles.ts
- test.tsx

Verifique toda a configura√ß√£o do Plop em `./generators`.

## Conclus√£o

**Criar este [boilerplate moderno para Next.js](https://github.com/diogorodrigues/nextjs-typescript-starter) me fez aprender muito e tentei garantir que todas as configura√ß√µes e ferramentas importantes que gosto de usar em meus projetos est√£o aqui. Espero que este starter seja √∫til para voc√™ tamb√©m. Depois me diga se gostou, se pretende usar e se tem alguma sugest√£o.**

At√© a pr√≥xima. üòÅ
